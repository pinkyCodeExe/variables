<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Variables con Tamales ‚Äì Demo din√°mica</title>
  <style>
    :root{
      --bg:#111315; --panel:#171a1d; --ink:#e8f0f2; --muted:#a9b3b9; --accent:#7bd389;
      --verde:#66bb6a; --rojo:#ef5350; --rajas:#ffd54f; --line:#24292e; --btn:#22262b;
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto; background:var(--bg); color:var(--ink);}
    .wrap{max-width:1000px;margin:auto;padding:24px}
    h1{font-size:28px;margin:0 0 8px}
    p.subtitle{margin:0 0 20px;color:var(--muted)}
    .grid{display:grid; gap:16px; grid-template-columns:1.3fr .7fr}
    @media (max-width:880px){.grid{grid-template-columns:1fr}}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01)); border:1px solid var(--line); border-radius:16px; padding:16px; box-shadow:0 8px 30px rgba(0,0,0,.25)}

    .toolbar{display:flex;flex-wrap:wrap;gap:10px}
    button, .chip{border:1px solid var(--line); background:var(--btn); color:var(--ink); padding:10px 14px; border-radius:999px; cursor:pointer; transition:transform .06s ease, box-shadow .2s ease, background .2s ease}
    button:active{transform:scale(.98)}
    button:hover{box-shadow:0 6px 18px rgba(0,0,0,.35)}
    .chip{font-size:12px; opacity:.9}

    .stage{display:grid; grid-template-columns:180px 1fr; gap:16px; align-items:center}
    @media (max-width:620px){.stage{grid-template-columns:1fr}}
    .svgbox{background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:18px; display:flex; align-items:center; justify-content:center}
    .readout{display:grid; gap:10px}

    pre{margin:0; white-space:pre-wrap; word-break:break-word}
    .console{height:180px; overflow:auto; background:#0d0f11; border-radius:12px; padding:12px; border:1px solid var(--line)}
    .console b{color:var(--accent)}

    .switch{display:inline-flex; align-items:center; gap:8px}
    .switch input{appearance:none; width:42px; height:24px; background:#2a2f35; border-radius:999px; position:relative; outline:none; cursor:pointer; border:1px solid var(--line)}
    .switch input:checked{background:#2f6b3c}
    .switch input::after{content:""; position:absolute; width:18px; height:18px; background:white; border-radius:999px; left:3px; top:2.5px; transition:left .18s ease}
    .switch input:checked::after{left:21px}

    .wiggle{animation:wig .45s ease}
    @keyframes wig{0%{transform:rotate(0)}20%{transform:rotate(-6deg)}45%{transform:rotate(5deg)}70%{transform:rotate(-2deg)}100%{transform:rotate(0)}}

    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace; font-size:12px; background:#0e1113; border:1px solid var(--line); padding:2px 6px; border-radius:6px; color:#c7d2d9}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,monospace; background:#0e1113; border:1px solid var(--line); padding:2px 6px; border-radius:6px}

    .phrase{margin-top:12px; display:flex; align-items:center; gap:10px; flex-wrap:wrap}
    #phraseText{font-size:18px; font-weight:600; background:#0e1113; border:1px solid var(--line); padding:10px 12px; border-radius:10px}
    #copyPhrase{padding:8px 12px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Variables con tamales üåΩ</h1>
    <p class="subtitle">Mueve los controles y mira c√≥mo cambian las variables en vivo. <span class="kbd">tamal</span> (string), <span class="kbd">cantidad</span> (number) y <span class="kbd">haySalsa</span> (boolean).</p>

    <div class="grid">
      <section class="card">
        <div class="stage">
          <div class="svgbox">
            <svg id="tamalSVG" width="140" height="140" viewBox="0 0 120 120" role="img" aria-label="Tamal">
              <defs>
                <linearGradient id="wrapGrad" x1="0" x2="0" y1="0" y2="1">
                  <stop offset="0%" stop-color="#7aa069"/>
                  <stop offset="100%" stop-color="#6a8c5c"/>
                </linearGradient>
              </defs>
              <rect x="24" y="20" rx="14" ry="14" width="72" height="86" fill="url(#wrapGrad)" stroke="#3e4a3e" />
              <rect x="20" y="58" width="80" height="6" fill="#2f4a2f" rx="3"/>
              <ellipse id="relleno" cx="60" cy="20" rx="36" ry="16" fill="var(--verde)" stroke="#2b2b2b"/>
            </svg>
          </div>
          <div class="readout">
            <div>
              <span class="chip">let <b>tamal</b> = <code id="tamalVal">"verde"</code></span>
            </div>
            <div class="toolbar" aria-label="Sabores">
              <button data-sabor="verde">Verde</button>
              <button data-sabor="rojo">Rojo</button>
              <button data-sabor="rajas">Rajas</button>
              <button id="randomBtn">Random</button>
            </div>
            <div class="toolbar" style="margin-top:6px">
              <button id="menos">‚àí</button>
              <span class="chip">let <b>cantidad</b> = <code id="cantVal">1</code></span>
              <button id="mas">+</button>
              <label class="switch">
                <input id="salsaToggle" type="checkbox" checked />
                <span>haySalsa</span>
              </label>
            </div>
            <div class="toolbar" style="margin-top:8px">
              <button id="paso">Paso ‚ñ∂Ô∏é</button>
              <button id="auto">Auto ‚ü≥</button>
              <button id="reset">Reset ‚Ü∫</button>
            </div>
          </div>
        </div>

        <div class="phrase">
          <div class="chip">Frase generada</div>
          <div id="phraseText">Yo quiero 1 tamal verde con salsa.</div>
          <button id="copyPhrase">Copiar</button>
        </div>

        <div style="margin-top:16px">
          <div class="chip">Estado actual (objetos en JS)</div>
          <pre class="console" id="stateBox"></pre>
        </div>

        <div style="margin-top:12px">
          <div class="chip">Consola (lo que <b>console.log</b> imprime)</div>
          <pre class="console" id="logBox"></pre>
        </div>
      </section>

      <aside class="card">
        <h3>¬øQu√© es una variable?</h3>
        <p>Es un <b>contenedor</b> con un <i>nombre</i> donde guardas un <i>dato</i> que puede <b>cambiar</b>. Aqu√≠ usamos tres:</p>
        <ul>
          <li><b>tamal</b>: un texto (<code>"verde"</code>, <code>"rojo"</code> o <code>"rajas"</code>).</li>
          <li><b>cantidad</b>: un n√∫mero (cu√°ntos tamales tienes).</li>
          <li><b>haySalsa</b>: verdadero/falso (<code>true</code>/<code>false</code>).</li>
        </ul>
        <p style="color:var(--muted)">Frase corta: <i>‚ÄúUna variable guarda lo que cambia.‚Äù</i></p>
      </aside>
    </div>
  </div>

  <script>
    let tamal = "verde";
    let cantidad = 1;
    let haySalsa = true;

    const relleno = document.getElementById('relleno');
    const tamalSVG = document.getElementById('tamalSVG');
    const tamalVal = document.getElementById('tamalVal');
    const cantVal = document.getElementById('cantVal');
    const salsaToggle = document.getElementById('salsaToggle');
    const stateBox = document.getElementById('stateBox');
    const logBox = document.getElementById('logBox');

    function plural(n){ return n===1 ? '' : 'es'; }
    function buildPhrase(){
      const n = cantidad;
      const salsa = haySalsa ? 'con salsa' : 'sin salsa';
      if(tamal === 'rajas') return `Yo quiero ${n} tamal${plural(n)} de rajas ${salsa}.`;
      if(tamal === 'rojo') return `Yo quiero ${n} tamal${plural(n)} rojo${plural(n)} ${salsa}.`;
      return `Yo quiero ${n} tamal${plural(n)} verde${plural(n)} ${salsa}.`;
    }

    const originalLog = console.log.bind(console);
    console.log = (...args)=>{ originalLog(...args); logBox.textContent += args.map(String).join(' ') + "\n"; logBox.scrollTop = logBox.scrollHeight; }

    function colorFor(sabor){
      return sabor==='verde'?getComputedStyle(document.documentElement).getPropertyValue('--verde'):
             sabor==='rojo'?getComputedStyle(document.documentElement).getPropertyValue('--rojo'):
             getComputedStyle(document.documentElement).getPropertyValue('--rajas');
    }

    function updateUI(){
      relleno.setAttribute('fill', colorFor(tamal.trim()));
      tamalVal.textContent = '"'+tamal+'"';
      cantVal.textContent = String(cantidad);
      salsaToggle.checked = !!haySalsa;
      const estado = { tamal, cantidad, haySalsa };
      stateBox.textContent = JSON.stringify(estado, null, 2);
      const phraseEl = document.getElementById('phraseText');
      if(phraseEl) phraseEl.textContent = buildPhrase();
    }

    function wiggle(){
      tamalSVG.classList.remove('wiggle');
      void tamalSVG.offsetWidth;
      tamalSVG.classList.add('wiggle');
    }

    document.querySelectorAll('button[data-sabor]').forEach(btn=>{
      btn.addEventListener('click',()=>{ tamal=btn.dataset.sabor; console.log('tamal =',tamal); updateUI(); wiggle(); });
    });

    document.getElementById('randomBtn').addEventListener('click',()=>{
      const sabores=['verde','rojo','rajas'];
      tamal=sabores[Math.floor(Math.random()*sabores.length)];
      cantidad=Math.max(1,Math.round(cantidad+(Math.random()>.5?1:-1)));
      haySalsa=Math.random()>.5;
      console.log('random ‚Üí',{tamal,cantidad,haySalsa});
      updateUI(); wiggle();
    });

    document.getElementById('mas').addEventListener('click',()=>{cantidad++;console.log('cantidad =',cantidad);updateUI();});
    document.getElementById('menos').addEventListener('click',()=>{cantidad=Math.max(0,cantidad-1);console.log('cantidad =',cantidad);updateUI();});
    salsaToggle.addEventListener('change',e=>{haySalsa=e.target.checked;console.log('haySalsa =',haySalsa);updateUI();});

    let timer=null;
    document.getElementById('paso').addEventListener('click',()=>{
      const sabores=['verde','rojo','rajas'];
      tamal=sabores[(sabores.indexOf(tamal)+1)%3];
      cantidad++;
      haySalsa=!haySalsa;
      console.log('paso ‚ñ∂Ô∏é',{tamal,cantidad,haySalsa});
      updateUI(); wiggle();
    });

    document.getElementById('auto').addEventListener('click',e=>{
      if(timer){clearInterval(timer);timer=null;e.target.textContent='Auto ‚ü≥';console.log('auto: OFF');return;}
      e.target.textContent='Detener ‚è∏';console.log('auto: ON');
      timer=setInterval(()=>document.getElementById('paso').click(),1200);
    });

    document.getElementById('reset').addEventListener('click',()=>{
      tamal='verde';cantidad=1;haySalsa=true;console.log('reset');updateUI();wiggle();
    });

    const copyBtn=document.getElementById('copyPhrase');
    if(copyBtn){copyBtn.addEventListener('click',async()=>{
      const txt=buildPhrase();
      try{await navigator.clipboard.writeText(txt);console.log('Frase copiada:',txt);}catch{console.log('No se pudo copiar autom√°ticamente.');}
    });}

    updateUI();
    console.log('Demo lista. Toca botones para cambiar variables.');
  </script>
</body>
</html>
